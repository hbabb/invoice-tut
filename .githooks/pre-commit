#!/bin/sh

echo "🔍 Running pre-commit hooks..."

# Get staged files
files=$(git diff --staged --name-only)

# Run prettier and Next.js lint on staged files
pnpm format && pnpm lint || {
    echo "❌ Linting/formatting failed. Please fix errors and try again."
    exit 1
}

# Add any fixes back to staging
git add $files

echo "✅ Pre-commit hook completed successfully!"